# ============================================================================
# ENVIRONMENT
# ============================================================================
ENVIRONMENT=development

# ============================================================================
# HTTP SERVER
# ============================================================================
HTTP_PORT=8080
SERVICE_NAME_API=financial-api

# ============================================================================
# DATABASE - CockroachDB (running in Docker container)
# ============================================================================
DB_DRIVER=postgres
DB_HOST=localhost
DB_PORT=26257
DB_USER=root
DB_PASSWORD=financial@dev
DB_NAME=financial
DB_MAX_IDLE_CONNS=6
DB_MAX_OPEN_CONNS=25
DB_CONN_MAX_LIFE_TIME_MINUTES=5
DB_CONN_MAX_IDLE_TIME_MINUTES=2
MIGRATE_PATH=file://database/migrations

# ============================================================================
# AUTHENTICATION & AUTHORIZATION
# ============================================================================
# Generate: openssl rand -hex 64
AUTH_SECRET_KEY=dev_secret_key_change_in_production_minimum_64_characters_required_for_security
AUTH_TOKEN_DURATION=24

# ============================================================================
# MESSAGE BROKER - RabbitMQ (running in Docker container)
# ============================================================================
RABBITMQ_URL=amqp://guest:rabbitmq@dev@localhost:5672/
RABBITMQ_EXCHANGE=financial.events
RABBITMQ_QUEUE=financial_queue
# Dead Letter Queue - mensagens não processadas após TTL ou rejection definitiva
# ATENÇÃO: mudar args de uma queue existente requer deletá-la e recriar
RABBITMQ_DLQ_EXCHANGE=financial.dlx
RABBITMQ_DLQ_QUEUE=financial_dlq

# ============================================================================
# CONSUMER CONFIGURATION
# ============================================================================
SERVICE_NAME_CONSUMER=financial-consumer
CONSUMER_BROKER_TYPE=rabbitmq
CONSUMER_EXCHANGE=financial.events
CONSUMER_WORKER_COUNT=5
CONSUMER_PREFETCH_COUNT=10

# ============================================================================
# WORKER - Outbox Pattern & Scheduled Jobs
# ============================================================================
SERVICE_NAME_WORKER=financial-worker
WORKER_DEFAULT_TIMEOUT_SECONDS=60
WORKER_MAX_CONCURRENT_JOBS=10
OUTBOX_POLL_INTERVAL_SECONDS=5
OUTBOX_BATCH_SIZE=100
OUTBOX_MAX_RETRIES=3

# ============================================================================
# OBSERVABILITY - OpenTelemetry (running in Docker container)
# ============================================================================
OTEL_SERVICE_VERSION=1.0.0-dev
OTEL_EXPORTER_OTLP_ENDPOINT=localhost:4317
OTEL_EXPORTER_OTLP_PROTOCOL=grpc
OTEL_EXPORTER_OTLP_INSECURE=true
OTEL_TRACE_SAMPLE_RATE=1.0
LOG_LEVEL=debug
LOG_FORMAT=json
